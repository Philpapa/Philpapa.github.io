import{l as g}from"./_@antv_x6@2.18.1@@antv-4eec9d0e.js";import{C as k}from"./_@antv_x6-plugin-clipboard@2.1.6@@antv-aa157434.js";import{H as y}from"./_@antv_x6-plugin-history@2.2.4@@antv-e4f72cd3.js";import{K as x}from"./_@antv_x6-plugin-keyboard@2.2.3@@antv-82233185.js";import{S}from"./_@antv_x6-plugin-selection@2.2.2@@antv-a8fc94b0.js";import{S as N}from"./_@antv_x6-plugin-snapline@2.1.7@@antv-59a74cb5.js";import{S as w}from"./_@antv_x6-plugin-stencil@2.1.5@@antv-c331e593.js";import{T as J}from"./_@antv_x6-plugin-transform@2.1.8@@antv-16edf239.js";import"./_@antv_x6-vue-shape@2.1.2@@antv-7a0d94b2.js";import{F as E}from"./_file-saver@2.0.5@file-saver-983a059b.js";import{c as F}from"./codeMirror-b0539c34.js";import{n as b}from"./index-36339b5b.js";import"./_@antv_x6-common@2.0.17@@antv-e9d2c7f8.js";import"./_lodash-es@4.17.21@lodash-es-326016e5.js";import"./_@antv_x6-geometry@2.0.5@@antv-5981308d.js";import"./_mousetrap@1.6.5@mousetrap-ba9bcf28.js";import"./_@antv_x6-plugin-dnd@2.1.1@@antv-e5e74e90.js";import"./_vue-demi@0.14.7@vue-demi-52bac217.js";import"./_vue@2.7.16@vue-c82c1faf.js";import"./_codemirror@5.65.16@codemirror-01d61fb4.js";import"./_element-ui@2.15.14@element-ui-d6404236.js";import"./_deepmerge@1.5.2@deepmerge-251d9111.js";import"./_resize-observer-polyfill@1.5.1@resize-observer-polyfill-88ffd6cd.js";import"./_throttle-debounce@1.1.0@throttle-debounce-d93b3c53.js";import"./_babel-helper-vue-jsx-merge-props@2.0.3@babel-helper-vue-jsx-merge-props-72d30afb.js";import"./_normalize-wheel@1.0.1@normalize-wheel-1b789469.js";import"./_async-validator@1.8.5@async-validator-8fabaacf.js";import"./_babel-runtime@6.26.0@babel-runtime-ff8b37cd.js";import"./_core-js@2.6.12@core-js-edebcccf.js";import"./_vuex@3.6.2@vuex-0d722715.js";import"./_axios@1.6.7@axios-8eaa8064.js";import"./_side-channel@1.0.5@side-channel-2c942eb6.js";import"./_get-intrinsic@1.2.4@get-intrinsic-c09dd1a7.js";import"./_es-errors@1.3.0@es-errors-d863dafe.js";import"./_has-symbols@1.0.3@has-symbols-af84758f.js";import"./_has-proto@1.0.1@has-proto-ed1b0be6.js";import"./_function-bind@1.1.2@function-bind-0a5fc7a8.js";import"./_hasown@2.0.1@hasown-7211ef3d.js";import"./_call-bind@1.0.7@call-bind-90319db2.js";import"./_set-function-length@1.2.1@set-function-length-ac203dfa.js";import"./_define-data-property@1.1.4@define-data-property-c2b4af81.js";import"./_es-define-property@1.0.0@es-define-property-86f51ffb.js";import"./_gopd@1.0.1@gopd-7b0e1986.js";import"./_has-property-descriptors@1.0.2@has-property-descriptors-af639a50.js";import"./_qs@6.11.2@qs-d48efb00.js";import"./_vue-router@3.5.3@vue-router-44f70d6f.js";import"./_nanoid@3.3.7@nanoid-3ec3f908.js";import"./_gm-crypto@0.1.12@gm-crypto-48543d3c.js";import"./_to-arraybuffer@1.0.1@to-arraybuffer-dd910a5e.js";import"./_buffer@5.7.1@buffer-81215e29.js";import"./_base64-js@1.5.1@base64-js-554c8894.js";import"./_ieee754@1.2.1@ieee754-0706f68c.js";import"./_jsbn@1.1.0@jsbn-726a10f4.js";import"./_element-resize-detector@1.2.4@element-resize-detector-0b105688.js";import"./_batch-processor@1.0.0@batch-processor-252a9c8d.js";import"./_@vueuse_core@10.7.2@@vueuse-38acc5bf.js";import"./_@vueuse_shared@10.7.2@@vueuse-98aa9f98.js";import"./_v-region@2.3.0@v-region-cb5f6f14.js";import"./_vuedraggable@2.24.3@vuedraggable-f97e6635.js";import"./_sortablejs@1.10.2@sortablejs-2915de19.js";const P={name:"cellPropSet",inject:["_PD"],data(){return{businessDic:{checkLevel:[{label:"\u4E00\u7EA7\u5BA1\u6838",value:1},{label:"\u4E8C\u7EA7\u5BA1\u6838",value:2},{label:"\u4E09\u7EA7\u5BA1\u6838",value:3}]}}},methods:{handleCellLevelChanged(l){let e=this._PD.currentCell,t=this._PD.graph,i=this.businessDic.checkLevel.find(c=>c.value===l);this._PD.currentCellJson.attrs.text.text=i.label;let s=t.getIncomingEdges(e);s&&t.removeCell(s[0].id);let o=t.getOutgoingEdges(e);for(;o;){let c=t.getCellById(o[0].target.cell);t.removeCell(o[0].id),o=t.getOutgoingEdges(c)}}}};var D=function(){var e=this,t=e._self._c;return e._PD.currentCellJson?t("div",{attrs:{id:"character-edit"}},[e._PD.currentCellJson.shape==="edge"?[t("div",{staticClass:"prop-title"},[e._v("\u8FB9\u5185\u5BB9")]),t("div",{staticClass:"prop-item"},[t("span",{staticClass:"prop-item-label"},[e._v("\u5185\u5BB9")]),t("el-input",{staticClass:"prop-item-con",attrs:{type:"text",placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},model:{value:e._PD.currentCellJson.labels[0].attrs.label.text,callback:function(i){e.$set(e._PD.currentCellJson.labels[0].attrs.label,"text",i)},expression:"_PD.currentCellJson.labels[0].attrs.label.text"}})],1),t("div",{staticClass:"prop-item"},[t("span",{staticClass:"prop-item-label"},[e._v("\u5B57\u53F7")]),t("el-input-number",{staticClass:"prop-item-con",attrs:{"controls-position":"right",size:"medium",min:14},model:{value:e._PD.currentCellJson.labels[0].attrs.label.fontSize,callback:function(i){e.$set(e._PD.currentCellJson.labels[0].attrs.label,"fontSize",i)},expression:"_PD.currentCellJson.labels[0].attrs.label.fontSize"}})],1)]:[t("div",{staticClass:"prop-title"},[e._v("\u8282\u70B9\u5C5E\u6027")]),t("div",{staticClass:"prop-item"},[t("span",[e._v("\u5185\u5BB9")]),t("el-input",{staticClass:"prop-item-con",attrs:{type:"text",placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},model:{value:e._PD.currentCellJson.attrs.text.text,callback:function(i){e.$set(e._PD.currentCellJson.attrs.text,"text",i)},expression:"_PD.currentCellJson.attrs.text.text"}})],1),t("div",{staticClass:"prop-item"},[t("span",[e._v("\u5B57\u53F7")]),t("el-input-number",{staticClass:"prop-item-con",attrs:{"controls-position":"right",size:"medium",min:14},model:{value:e._PD.currentCellJson.attrs.text.fontSize,callback:function(i){e.$set(e._PD.currentCellJson.attrs.text,"fontSize",i)},expression:"_PD.currentCellJson.attrs.text.fontSize"}})],1),e._PD.currentCellJson.data?[t("div",{staticClass:"prop-title"},[e._v("\u4E1A\u52A1\u5C5E\u6027")]),e._PD.currentCellJson.data.levelName?t("div",{staticClass:"prop-item"},[t("span",[e._v("\u8282\u70B9\u540D\u79F0")]),t("div",{staticClass:"prop-item-con"},[e._v(e._s(e._PD.currentCellJson.data.levelName))])]):e._e(),e._PD.currentCellJson.data.relation?t("div",{staticClass:"prop-item"},[t("span",[e._v("\u5173\u7CFB")]),t("div",{staticClass:"prop-item-con"},[e._v(e._s(e._PD.currentCellJson.data.relation))])]):e._e(),e._PD.currentCellJson.data.checkLevel?t("div",{staticClass:"prop-item"},[t("span",[e._v("\u7B49\u7EA7")]),t("el-select",{staticClass:"prop-item-con",attrs:{placeholder:"\u8BF7\u9009\u62E9"},on:{change:e.handleCellLevelChanged},model:{value:e._PD.currentCellJson.data.checkLevel,callback:function(i){e.$set(e._PD.currentCellJson.data,"checkLevel",i)},expression:"_PD.currentCellJson.data.checkLevel"}},e._l(e.businessDic.checkLevel,function(i){return t("el-option",{key:i.value,attrs:{label:i.label,value:i.value}})}),1)],1):e._e()]:e._e()]],2):e._e()},L=[],O=b(P,D,L,!1,null,"c6a323f5",null,null);const z=O.exports;const v={groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"show"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"show"}}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"show"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"show"}}}}},items:[{group:"top"},{group:"right"},{group:"bottom"},{group:"left"}]},$={name:"processDesigner",provide(){return{_PD:this}},components:{codeMirror:F,cellPropSet:z},data(){return{graph:null,stencil:null,currentCellJson:null,currentCell:null,uploadArr:null,jsonVisible:!1,uploadVisible:!1,hadWarning:!1}},methods:{initDrawContainer(){const l=new g.Graph({container:this.$refs.drawContainer,autoResize:!0,background:{color:"#eff1f6"},grid:{size:10,visible:!0,type:"dot",args:{color:"#595959",thickness:2}},panning:{enabled:!0,eventTypes:"rightMouseDown"},mousewheel:{enabled:!0,zoomAtMousePosition:!0,modifiers:"ctrl",minScale:.5,maxScale:3},connecting:{anchor:"center",connectionPoint:"anchor",allowBlank:!1,snap:{radius:20},createEdge(){return new g.Shape.Edge({attrs:{line:{stroke:"#007aff",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},router:{name:"manhattan",args:{padding:10}},zIndex:0,labels:[{attrs:{label:{text:"",fontSize:14,stroke:"#333"},body:{fill:"#fff"}},position:.5}],tools:[{name:"button-remove",args:{distance:.5,offset:{x:0,y:20},rotate:!0}}]})},validateConnection({sourceCell:e,targetCell:t,sourceMagnet:i,targetMagnet:s}){if(!i||!s||e===t)return!1;{if(!o.call(this,e,t)||i.getAttribute("port-group")==="top"||s.getAttribute("port-group")!=="top")return!1;let c=this.getOutgoingEdges(e),d=this.getIncomingEdges(t);if(e.data.name==="check"){if(t.data.name==="flow"&&!d)return!0;if(t.data.name==="check"&&d)return!1}else if(e.data.name!=="flow"){if(c.length>1||d)return!1}return!0}function o(c,d){const{data:{name:n,checkLevel:r}}=c,{data:{name:u,checkLevel:f}}=d;if(n===u)return n==="check"?r<f&&f-r===1:n==="flow";if(n==="report"&&(u!=="check"||f!==1)||n==="check"&&(r===3&&u!=="filing"||!["flow","filing"].includes(u)))return!1;if(n==="flow"){if(u!=="check")return!1;let a=this.getIncomingEdges(c),m=a&&a[0].source?this.getCellById(a[0].source.cell):null;for(;m&&m.data.name!=="check";)a=this.getIncomingEdges(m),m=a&&a[0].source?this.getCellById(a[0].source.cell):null;if(!m)return!1;let p=m.data.checkLevel;if(d.data.checkLevel-p!==1)return!1}return!0}}},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#5F95FF",stroke:"#5F95FF"}}}}});this.graph=l,this.usePlugins(l),this.registerNode(),this.initStencil(l),this.bindShortcutKeys(l),this.initGraphEvent(l),l.addNodes([{shape:"custom-rect",label:"\u4E0A\u62A5",width:60,height:40,position:{x:100,y:50},attrs:{body:{rx:20,ry:20,stroke:"#c2c8d5",fill:"#95f204"}},ports:{groups:{bottom:v.groups.bottom},items:[{group:"bottom"}]},data:{name:"report",relation:""}},{shape:"custom-rect",label:"\u5F52\u6863",width:60,height:40,position:{x:100,y:300},attrs:{body:{rx:20,ry:20,stroke:"#c2c8d5",fill:"#f59a23"}},ports:{groups:{top:v.groups.top},items:[{group:"top"}]},data:{name:"filing",relation:""}}])},initGraphEvent(l){function e(t){let i=t.toJSON();console.log(i,"cellJSON"),console.log(l);let s=l.getCells();if(s=s.filter(o=>o.id!==t.id&&o.data),i.ports)for(let o in i.ports.groups)i.ports.groups[o]=v.groups[o];if(i.data.name==="check"){let o=s.filter(c=>c.data.name==="check");if(o.length>0){let c=o.map(r=>r.data.checkLevel),d=Math.max(...c),n={1:"\u4E00\u7EA7\u5BA1\u6838",2:"\u4E8C\u7EA7\u5BA1\u6838",3:"\u4E09\u7EA7\u5BA1\u6838"};i.data.checkLevel=d===3?3:d+1,i.attrs.text.text=n[i.data.checkLevel]}else i.attrs.text.text="\u4E00\u7EA7\u5BA1\u6838"}t.setProp(i)}l.on("node:added",({cell:t,index:i,options:s})=>{if(!t.data)return;console.log(t,"cell"),["check","flow"].includes(t.data.name)&&e.call(this,t)}),l.on("node:click",this.editCell),l.on("edge:click",this.editCell)},initStencil(l){const e={groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}}}},items:[{group:"top"},{group:"right"},{group:"bottom"},{group:"left"}]},t=new w({title:"\u6D41\u7A0B\u56FE",target:l,stencilGraphWidth:192,stencilGraphHeight:0,stencilGraphPadding:0,collapsable:!0,groups:[{title:"\u57FA\u7840\u6D41\u7A0B\u56FE",name:"group1"}],layoutOptions:{columns:2,columnWidth:88,rowHeight:80,dx:8,dy:8}});document.getElementById("stencil").appendChild(t.container),this.stencil=t;let i=this;const s=l.createNode({shape:"custom-rect",label:"\u5BA1\u6838",width:65,height:65,attrs:{body:{stroke:"#c2c8d5",fill:"#81d3f8"}},ports:{groups:{top:e.groups.top,bottom:e.groups.bottom},items:[{group:"top"},{group:"bottom"}]},data:{name:"check",checkLevel:1},tools:[{name:"button-remove",args:{offset:{x:-10,y:0},rotate:!0,onClick:({cell:c})=>{i.currentCell&&i.currentCell.id===c.id&&(i.currentCell=null,i.currentCellJson=null),i.graph.removeNode(c.id)}}}]}),o=l.createNode({shape:"custom-rect",label:"\u6D41\u8F6C",width:65,height:65,attrs:{body:{stroke:"#c2c8d5",fill:"#aaaaaa"}},ports:{groups:{top:e.groups.top,bottom:e.groups.bottom},items:[{group:"top"},{group:"bottom"}]},data:{name:"flow"},tools:[{name:"button-remove",args:{offset:{x:-10,y:0},rotate:!0}}]});t.load([s,o],"group1")},usePlugins(l){l.use(new J({resizing:!0,rotating:!0})).use(new S({enabled:!0,rubberband:!0,showNodeSelectionBox:!0})).use(new N({enabled:!0,tolerance:10})).use(new x({enabled:!0})).use(new k({enabled:!0})).use(new y({enabled:!0}))},bindShortcutKeys(l){l.bindKey(["meta+c","ctrl+c"],()=>{const e=l.getSelectedCells();return e.length&&l.copy(e),!1}),l.bindKey(["meta+x","ctrl+x"],()=>{const e=l.getSelectedCells();return e.length&&l.cut(e),!1}),l.bindKey(["meta+v","ctrl+v"],()=>{if(!l.isClipboardEmpty()){const e=l.paste({offset:32});l.cleanSelection(),l.select(e)}return!1}),l.bindKey(["meta+z","ctrl+z"],()=>(l.canUndo()&&l.undo(),!1)),l.bindKey(["meta+y","ctrl+y"],()=>(l.canRedo()&&l.redo(),!1)),l.bindKey(["meta+a","ctrl+a"],()=>{const e=l.getNodes();e&&l.select(e)}),l.bindKey("backspace",()=>{const e=l.getSelectedCells();e.length&&l.removeCells(e)}),l.bindKey(["ctrl+q","meta+q"],()=>{l.zoom()<1.5&&l.zoom(.1)}),l.bindKey(["ctrl+e","meta+e"],()=>{l.zoom()>.5&&l.zoom(-.1)})},registerNode(l){g.Graph.registerNode("custom-rect",{inherit:"rect",width:50,height:50,attrs:{body:{strokeWidth:1,stroke:"#007aff",fill:"#f2f8ff"},text:{fontSize:14,fill:"#595959"}}},!0),g.Graph.registerNode("custom-polygon",{inherit:"polygon",width:80,height:40,attrs:{body:{strokeWidth:1,stroke:"#007aff",fill:"#f2f8ff"},text:{fontSize:14,fill:"#606266"}}},!0),g.Graph.registerNode("custom-circle",{inherit:"circle",width:40,height:40,attrs:{body:{strokeWidth:1,stroke:"#007aff",fill:"#f2f8ff"},text:{fontSize:14,fill:"#606266"}}},!0)},editCell({cell:l}){if(this.currentCell&&this.currentCell.id===l.id){this.currentCell=null,this.currentCellJson=null;return}this.currentCell=l,this.currentCellJson=this.initCellProp(l.toJSON()),l.on("changed",({cell:e,options:t})=>{this.currentCell=e,this.currentCellJson=this.initCellProp(e.toJSON())})},initCellProp(l){let{attrs:e,shape:t}=l;return t==="edge"||e.text.fontSize||(l.attrs.text.fontSize=14),l},exportJSON(){this.jsonVisible=!1;const l=JSON.stringify(this.graph.toJSON()),e=new Blob([l],{type:""});E.saveAs(e,"data.json")},updateReason(l){let e=this;var t=new FileReader;t.readAsText(l.raw,"UTF-8"),t.onload=async function(i){let s=[];try{s=JSON.parse(i.target.result)}catch{s=[]}e.uploadArr=s}},handleJSON(){!this.uploadArr||(this.uploadArr&&this.graph&&this.graph.fromJSON(this.uploadArr),this.uploadArr=null,this.uploadVisible=!1)},checkProcess(){let l=this.graph.getNodes();for(let t of l){const{data:{name:i}}=t;let s={report:1,check:2,flow:2,filing:3};if(!e.call(this.graph,t,s[i])){this.$message.warning("\u6D41\u7A0B\u5B58\u5728\u95EE\u9898");return}}function e(t,i){let s=this.getIncomingEdges(t),o=this.getOutgoingEdges(t);if(i===1){if(!o)return!1}else if(i===2){if(!s||!o)return!1}else if(i===3&&!s)return!1;return!0}},setCellRelation(){let l=this.graph,e=l.getCells();e.forEach(o=>{o.data&&(o.data.relation&&o.setData({relation:""}),o.data.levelName&&o.setData({levelName:""}),o.data.relationShip&&o.setData({relationShip:""}))});let t=e.find(o=>o.data&&o.data.name==="filing");i(t),s(t),this.setCellRelationLine();function i(o){let d=(l.getIncomingEdges(o)||[]).map(r=>l.getCellById(r.source.cell)),n;if(o.data.name==="flow"){let r=d[0];if(r.data.name!=="check"){let u=l.getIncomingEdges(r),a=l.getOutgoingEdges(r).map(p=>l.getCellById(p.target.cell)),m=0;for(;r&&r.data.name!=="check";)m++,r=l.getCellById(u[0].source.cell);if(a.length>1){for(let p in a)if(a[p].id===o.id){n=`C${r.data.checkLevel}F${m+1}-${Number(p)+1}`;break}}else n=`C${r.data.checkLevel}F${m+1}`}else{let f=l.getOutgoingEdges(r).map(a=>l.getCellById(a.target.cell));if(f.length>1){for(let a in f)if(f[a].id===o.id){n=`C${r.data.checkLevel}F1-${Number(a)+1}`;break}}else n=`C${r.data.checkLevel}F1`}}else o.data.name==="check"?n=`C${o.data.checkLevel}`:o.data.name==="report"?n="B":o.data.name==="filing"&&(n="E");o.setData({levelName:n}),d.forEach(r=>{i(r)})}function s(o){let c,d,n=l.getIncomingEdges(o),r=l.getOutgoingEdges(o);if(r?d=r.map(f=>l.getCellById(f.target.cell).data.levelName).join("|"):d=null,n){let u=n.map(a=>l.getCellById(a.source.cell));u.forEach(a=>{s(a)}),c=u.map(a=>a.data.levelName).join("|")}else c=null;o.setData({relationShip:`${c||""}:${d||""}`})}},setCellRelationLine(){let l=this.graph,t=l.getCells().find(s=>s.data&&s.data.name==="report");i(t);function i(s){let o=l.getOutgoingEdges(s);if(!o)return;let c=o.map(r=>l.getCellById(r.target.cell)),d=c.length,n=s.data?s.data.relation:"";c.forEach((r,u)=>{const{data:{levelName:f,relation:a,name:m}}=r;let p;if(m==="check")p=`${n?`${n}-`:""}${f}`,a&&(p=`${a}|${p}`);else if(m==="flow")if(n){let h=n.split("-").filter(_=>_.includes("f"));p=`${n}-f${h.length>0?Number(h[h.length-1].replace("f",""))+1:1}${d>1?`-${u+1}`:""}`}else p="";p&&r.setData({relation:p}),i(r)})}}},watch:{currentCellJson:{deep:!0,handler(l){this.currentCell&&this.currentCell.setProp(l)}}},mounted(){this.initDrawContainer()}};var I=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"drawing-container"}},[t("div",{staticClass:"tools-bar"},[t("div",{staticClass:"main-tool"}),t("div",{staticClass:"other-tool"},[t("div",{staticClass:"tools-btn",on:{click:e.checkProcess}},[t("d-icon",{attrs:{name:"createJson"}}),t("span",[e._v("\u6821\u9A8C")])],1),t("div",{staticClass:"tools-btn",on:{click:e.setCellRelation}},[t("d-icon",{attrs:{name:"createJson"}}),t("span",[e._v("\u8BBE\u7F6E\u5173\u7CFB")])],1),t("div",{staticClass:"tools-btn",on:{click:function(i){e.jsonVisible=!0}}},[t("d-icon",{attrs:{name:"createJson"}}),t("span",[e._v("\u751F\u6210JSON")])],1),t("div",{staticClass:"tools-btn",on:{click:function(i){e.uploadVisible=!0}}},[t("d-icon",{attrs:{name:"importJson"}}),t("span",[e._v("\u5BFC\u5165JSON")])],1)])]),t("div",{staticClass:"drawing"},[t("div",{attrs:{id:"stencil"}}),t("div",{ref:"drawContainer",attrs:{id:"drawing-board"}},[e._m(0)]),t("cellPropSet")],1),t("el-dialog",{staticClass:"json-edit",attrs:{title:"\u5BFC\u51FAJSON\u6570\u636E",visible:e.jsonVisible,"close-on-click-modal":!1,width:"800px","destroy-on-close":""},on:{"update:visible":function(i){e.jsonVisible=i}}},[e.graph?t("div",{staticStyle:{height:"500px"}},[t("codeMirror",{ref:"jsonEditor",staticStyle:{width:"100%",height:"100%"},attrs:{mode:"application/json","json-code":JSON.stringify(e.graph.toJSON()),readonly:!1}})],1):e._e(),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.exportJSON}},[e._v("\u5BFC\u51FAJSON\u6570\u636E")]),t("el-button",{attrs:{size:"small"},on:{click:function(i){e.jsonVisible=!1}}},[e._v("\u53D6\u6D88")])],1)]),t("el-dialog",{staticClass:"json-import-edit",attrs:{title:"\u5BFC\u5165JSON\u6570\u636E",width:"408px",visible:e.uploadVisible,"close-on-click-modal":!1,"destroy-on-close":!0},on:{"update:visible":function(i){e.uploadVisible=i}}},[t("elUpload",{staticStyle:{height:"fit-content"},attrs:{drag:"",action:"",multiple:"","on-change":e.updateReason,"auto-upload":!1,accept:".json",limit:1,"list-type":"multipart/form-data"}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text"},[e._v("\u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C\u6216"),t("em",[e._v("\u70B9\u51FB\u4E0A\u4F20")])]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\u53EA\u80FD\u4E0A\u4F20JSON\u6587\u4EF6")])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleJSON}},[e._v("\u4FDD\u5B58")]),t("el-button",{attrs:{size:"small"},on:{click:()=>{e.uploadVisible=!1,e.uploadArr=null}}},[e._v("\u53D6\u6D88")])],1)],1)],1)},j=[function(){var l=this,e=l._self._c;return e("div",{staticClass:"draw-node-item"},[e("div",{staticClass:"draw-node-content"})])}],R=b($,I,j,!1,null,"642c394c",null,null);const Me=R.exports;export{Me as default};
