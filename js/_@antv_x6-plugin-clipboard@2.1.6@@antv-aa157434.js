import{l as r}from"./_@antv_x6@2.18.1@@antv-4eec9d0e.js";class f{constructor(){this.cells=[]}copy(t,e,o={}){this.options=Object.assign({},o);const l=(r.Model.isModel(e)?e:e.model).cloneSubGraph(t,o);this.cells=r.ArrayExt.sortBy(Object.keys(l).map(n=>l[n]),n=>n.isEdge()?2:1),this.serialize(o)}cut(t,e,o={}){this.copy(t,e,o),(r.Graph.isGraph(e)?e.model:e).batchUpdate("cut",()=>{t.forEach(l=>l.remove())})}paste(t,e={}){const o=Object.assign(Object.assign({},this.options),e),{offset:s,edgeProps:l,nodeProps:n}=o;let a=20,d=20;s&&(a=typeof s=="number"?s:s.dx,d=typeof s=="number"?s:s.dy),this.deserialize(o);const h=this.cells;h.forEach(c=>{c.model=null,c.removeProp("zIndex"),(a||d)&&c.translate(a,d),n&&c.isNode()&&c.prop(n),l&&c.isEdge()&&c.prop(l)});const b=r.Graph.isGraph(t)?t.model:t;return b.batchUpdate("paste",()=>{b.addCells(this.cells)}),this.copy(h,t,e),h}serialize(t){t.useLocalStorage!==!1&&p.save(this.cells)}deserialize(t){if(t.useLocalStorage){const e=p.fetch();e&&(this.cells=e)}}isEmpty(t={}){return t.useLocalStorage&&this.deserialize(t),this.cells.length<=0}clean(){this.options={},this.cells=[],p.clean()}}var p;(function(i){const t=`${r.Config.prefixCls}.clipboard.cells`;function e(l){if(window.localStorage){const n=l.map(a=>a.toJSON());localStorage.setItem(t,JSON.stringify(n))}}i.save=e;function o(){if(window.localStorage){const l=localStorage.getItem(t),n=l?JSON.parse(l):[];if(n)return r.Model.fromJSON(n)}}i.fetch=o;function s(){window.localStorage&&localStorage.removeItem(t)}i.clean=s})(p||(p={}));r.Graph.prototype.isClipboardEnabled=function(){const i=this.getPlugin("clipboard");return i?i.isEnabled():!1};r.Graph.prototype.enableClipboard=function(){const i=this.getPlugin("clipboard");return i&&i.enable(),this};r.Graph.prototype.disableClipboard=function(){const i=this.getPlugin("clipboard");return i&&i.disable(),this};r.Graph.prototype.toggleClipboard=function(i){const t=this.getPlugin("clipboard");return t&&t.toggleEnabled(i),this};r.Graph.prototype.isClipboardEmpty=function(i){const t=this.getPlugin("clipboard");return t?t.isEmpty(i):!0};r.Graph.prototype.getCellsInClipboard=function(){const i=this.getPlugin("clipboard");return i?i.getCellsInClipboard():[]};r.Graph.prototype.cleanClipboard=function(){const i=this.getPlugin("clipboard");return i&&i.clean(),this};r.Graph.prototype.copy=function(i,t){const e=this.getPlugin("clipboard");return e&&e.copy(i,t),this};r.Graph.prototype.cut=function(i,t){const e=this.getPlugin("clipboard");return e&&e.cut(i,t),this};r.Graph.prototype.paste=function(i,t){const e=this.getPlugin("clipboard");return e?e.paste(i,t):[]};var u=globalThis&&globalThis.__decorate||function(i,t,e,o){var s=arguments.length,l=s<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(i,t,e,o);else for(var a=i.length-1;a>=0;a--)(n=i[a])&&(l=(s<3?n(l):s>3?n(t,e,l):n(t,e))||l);return s>3&&l&&Object.defineProperty(t,e,l),l},g=globalThis&&globalThis.__rest||function(i,t){var e={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&t.indexOf(o)<0&&(e[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(i);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(i,o[s])&&(e[o[s]]=i[o[s]]);return e};class m extends r.Basecoat{get disabled(){return this.options.enabled!==!0}get cells(){return this.clipboardImpl.cells}constructor(t={}){super(),this.name="clipboard",this.options=Object.assign({enabled:!0},t)}init(t){this.graph=t,this.clipboardImpl=new f,this.clipboardImpl.deserialize(this.options)}isEnabled(){return!this.disabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}toggleEnabled(t){return t!=null?t!==this.isEnabled()&&(t?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}isEmpty(t={}){return this.clipboardImpl.isEmpty(t)}getCellsInClipboard(){return this.cells}clean(t){return(!this.disabled||t)&&(this.clipboardImpl.clean(),this.notify("clipboard:changed",{cells:[]})),this}copy(t,e={}){return this.disabled||(this.clipboardImpl.copy(t,this.graph,Object.assign(Object.assign({},this.commonOptions),e)),this.notify("clipboard:changed",{cells:t})),this}cut(t,e={}){return this.disabled||(this.clipboardImpl.cut(t,this.graph,Object.assign(Object.assign({},this.commonOptions),e)),this.notify("clipboard:changed",{cells:t})),this}paste(t={},e=this.graph){return this.disabled?[]:this.clipboardImpl.paste(e,Object.assign(Object.assign({},this.commonOptions),t))}get commonOptions(){const t=this.options;return g(t,["enabled"])}notify(t,e){this.trigger(t,e),this.graph.trigger(t,e)}dispose(){this.clean(!0),this.off()}}u([r.Basecoat.dispose()],m.prototype,"dispose",null);export{m as C};
