var b={exports:{}},y=b.exports={};y.getOption=B;function B(u,a,e){var t=u[a];return t==null&&e!==void 0?e:t}var h=b.exports,F=function(a){a=a||{};var e=a.reporter,t=h.getOption(a,"async",!0),d=h.getOption(a,"auto",!0);d&&!t&&(e&&e.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),t=!0);var c=g(),o,r=!1;function i(n,f){!r&&d&&t&&c.size()===0&&p(),c.add(n,f)}function s(){for(r=!0;c.size();){var n=c;c=g(),n.process()}r=!1}function v(n){r||(n===void 0&&(n=t),o&&(m(o),o=null),n?p():s())}function p(){o=z(s)}function m(n){var f=clearTimeout;return f(n)}function z(n){var f=function(x){return setTimeout(x,0)};return f(n)}return{add:i,force:v}};function g(){var u={},a=0,e=0,t=0;function d(r,i){i||(i=r,r=0),r>e?e=r:r<t&&(t=r),u[r]||(u[r]=[]),u[r].push(i),a++}function c(){for(var r=t;r<=e;r++)for(var i=u[r],s=0;s<i.length;s++){var v=i[s];v()}}function o(){return a}return{add:d,process:c,size:o}}export{F as b};
