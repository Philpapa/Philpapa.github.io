import{c as h}from"./_@antv_x6-common@2.0.17@@antv-5f61d1c3.js";import{l as v}from"./_@antv_x6@2.18.1@@antv-b1d372ee.js";import{r as _}from"./_vue-demi@0.14.6@vue-demi-7b32015b.js";var V={},O={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.VueShape=void 0;const c=v;class i extends c.Node{}n.VueShape=i,function(u){function r(t){const o=[],e=c.Markup.getForeignObjectMarkup();return t?o.push({tagName:t,selector:"body"},e):o.push(e),o}u.config({view:"vue-shape-view",markup:r(),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}},propHooks(t){if(t.markup==null){const o=t.primer;if(o){t.markup=r(o);let e={};switch(o){case"circle":e={refCx:"50%",refCy:"50%",refR:"50%"};break;case"ellipse":e={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"};break}t.attrs=c.ObjectExt.merge({},{body:Object.assign({refWidth:null,refHeight:null},e)},t.attrs||{})}}return t}}),c.Node.registry.register("vue-shape",u,!0)}(i=n.VueShape||(n.VueShape={}))})(O);var w={},b={};(function(n){var c=h&&h.__rest||function(r,t){var o={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&t.indexOf(e)<0&&(o[e]=r[e]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,e=Object.getOwnPropertySymbols(r);s<e.length;s++)t.indexOf(e[s])<0&&Object.prototype.propertyIsEnumerable.call(r,e[s])&&(o[e[s]]=r[e[s]]);return o};Object.defineProperty(n,"__esModule",{value:!0}),n.register=n.shapeMaps=void 0;const i=v;n.shapeMaps={};function u(r){const{shape:t,component:o,inherit:e}=r,s=c(r,["shape","component","inherit"]);if(!t)throw new Error("should specify shape in config");n.shapeMaps[t]={component:o},i.Graph.registerNode(t,Object.assign({inherit:e||"vue-shape"},s),!0)}n.register=u})(b);var a={};Object.defineProperty(a,"__esModule",{value:!0});a.getTeleport=a.isActive=a.disconnect=a.connect=void 0;const f=_;let m=!1;const g=(0,f.reactive)({});function j(n,c,i,u,r){if(m){const{Teleport:t,markRaw:o}=f.Vue;g[n]=o((0,f.defineComponent)({render:()=>(0,f.h)(t,{to:i},[(0,f.h)(c,{node:u,graph:r})]),provide:()=>({getNode:()=>u,getGraph:()=>r})}))}}a.connect=j;function C(n){m&&delete g[n]}a.disconnect=C;function M(){return m}a.isActive=M;function N(){if(!f.isVue3)throw new Error("teleport is only available in Vue3");m=!0;const{Fragment:n}=f.Vue;return(0,f.defineComponent)({setup(){return()=>(0,f.h)(n,{},Object.keys(g).map(c=>(0,f.h)(g[c])))}})}a.getTeleport=N;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.VueShapeView=void 0;const c=v,i=_,u=b,r=a;class t extends c.NodeView{getComponentContainer(){return this.selectors&&this.selectors.foContent}confirmUpdate(e){const s=super.confirmUpdate(e);return this.handleAction(s,t.action,()=>{this.renderVueComponent()})}targetId(){return`${this.graph.view.cid}:${this.cell.id}`}renderVueComponent(){this.unmountVueComponent();const e=this.getComponentContainer(),s=this.cell,p=this.graph;if(e){const{component:l}=u.shapeMaps[s.shape];if(l)if(i.isVue2){const y=i.Vue2;this.vm=new y({el:e,render(d){return d(l,{node:s,graph:p})},provide(){return{getNode:()=>s,getGraph:()=>p}}})}else i.isVue3&&((0,r.isActive)()?(0,r.connect)(this.targetId(),l,e,s,p):(this.vm=(0,i.createApp)({render(){return(0,i.h)(l,{node:s,graph:p})},provide(){return{getNode:()=>s,getGraph:()=>p}}}),this.vm.mount(e)))}}unmountVueComponent(){const e=this.getComponentContainer();return this.vm&&(i.isVue2&&this.vm.$destroy(),i.isVue3&&this.vm.unmount(),this.vm=null),e&&(e.innerHTML=""),e}onMouseDown(e,s,p){const l=e.target;if(l.tagName.toLowerCase()==="input"){const d=l.getAttribute("type");if(d==null||["text","password","number","email","search","tel","url"].includes(d))return}super.onMouseDown(e,s,p)}unmount(){return(0,r.isActive)()&&(0,r.disconnect)(this.targetId()),this.unmountVueComponent(),super.unmount(),this}}n.VueShapeView=t,function(o){o.action="vue",o.config({bootstrap:[o.action],actions:{component:o.action}}),c.NodeView.registry.register("vue-shape-view",o,!0)}(t=n.VueShapeView||(n.VueShapeView={}))})(w);(function(n){var c=h&&h.__createBinding||(Object.create?function(u,r,t,o){o===void 0&&(o=t);var e=Object.getOwnPropertyDescriptor(r,t);(!e||("get"in e?!r.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(u,o,e)}:function(u,r,t,o){o===void 0&&(o=t),u[o]=r[t]}),i=h&&h.__exportStar||function(u,r){for(var t in u)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&c(r,u,t)};Object.defineProperty(n,"__esModule",{value:!0}),i(O,n),i(w,n),i(b,n),i(a,n)})(V);export{V as l};
