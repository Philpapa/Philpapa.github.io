import{b as s}from"./index.efeafa02.js";import{Y as r,g as l}from"./index.0af4b258.js";const o={data(){const i=s(new Date().getTime()-5184e5,"y-M-d 00:00:00"),e=s(new Date().getTime(),"y-M-d 23:59:59");return{tableData:[],loading:!1,formList:[],formInline:{timerange:[i,e]},page:{pageNum:1,pageSize:20,total:0},form:{name:""},showFormVisible:!1,rules:{name:[{required:!0,message:"\u8BF7\u9009\u62E9\u540D\u79F0",trigger:"change"}]},dialogTitle:"\u65B0\u589E",arr:{},curRow:{},bgkData:[],versionList:{},datsetname_list:[],selectSetname:{},filedsList:{},formid:""}},computed:{...r({})},mounted(){this.getData()},methods:{handlerFilter(){this.getData()},getData(){this.loading=!0;let i="",e="";this.formInline.timerange&&this.formInline.timerange.length===2&&(i=s(new Date().getTime(this.formInline.timerange[0]),"y-M-d 00:00:00"),e=s(new Date(this.formInline.timerange[1]).getTime(),"y-M-d 23:59:59"));const t={...this.page,filter:{date_begin:i,date_end:e,origin:"\u4F20\u67D3\u75C5\u62A5\u544A\u5361"}};this.tableData=[],this.$api.customForm.getBusFormList(t).then(a=>{a.status==104?(this.tableData=a.data.list||[],this.page.total=a.data.total):this.$message({type:"warning",message:a.msg})}).finally(()=>{this.loading=!1})},handleSizeChange(i){this.$set(this.page,"pageSize",i),this.getData()},handleCurrentChange(i){this.$set(this.page,"pageNum",i),this.getData()},formatDate:s,async addCRB(i){this.$router.push({name:"reportCard",params:{cbInfo:{id:i,act:"add",system:0}}})},handleView(i){this.arr={},this.$router.push({name:"reportCard",params:{cbInfo:{act:"view",...i,id:i.form_id,system:0}}})},handleEdit(i){this.arr={},this.$router.push({name:"reportCard",params:{cbInfo:{act:"mod",...i,id:i.form_id,system:0}}})},handleDelete(i){const e={act:"del",dat_id:i.dat_id,form_id:i.form_id,origin:"\u4F20\u67D3\u75C5\u62A5\u544A\u5361"};this.$confirm("\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u5DF2\u6784\u5EFA\u6570\u636E, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{this.$api.customForm.submitBusForm(e).then(t=>{t.status==102?(this.$message.success({message:t.msg}),this.getData()):this.$message.warning({message:t.msg})})}).catch(()=>{})}}};var m=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.showFormVisible,expression:"!showFormVisible"}],staticClass:"busList"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,size:"small"}},[t("el-form-item",{attrs:{label:"\u62A5\u544A\u65F6\u95F4\uFF1A"}},[t("el-date-picker",{attrs:{type:"daterange",placement:"bottom-start","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","value-format":"yyyy-MM-dd hh:mm:ss","default-time":["00:00:00","23:59:59"]},model:{value:e.formInline.timerange,callback:function(a){e.$set(e.formInline,"timerange",a)},expression:"formInline.timerange"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.getData}},[e._v("\u67E5\u8BE2")])],1)],1),t("div",{staticClass:"addBtn"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.addCRB("e3636f59-2cb6-45d5-8586-4f1508b44c88")}}},[e._v("\u65B0\u589E\u4F20\u67D3\u75C5\u62A5\u544A\u5361")]),t("div",{staticClass:"input-form"},[t("el-input",{attrs:{clearable:"",placeholder:"\u8BF7\u8F93\u5165\u8868\u5355id"},model:{value:e.formid,callback:function(a){e.formid=a},expression:"formid"}})],1),e.formid?t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.addCRB(e.formid)}}},[e._v("\u65B0\u589E\u81EA\u5B9A\u4E49")]):e._e()],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table",attrs:{data:e.tableData,height:"calc(100% - 100px)",border:""}},[t("el-table-column",{attrs:{prop:"dat_id",label:"\u4E8B\u4EF6ID","min-width":"250","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"form_id",label:"\u6A21\u677F\u7F16\u53F7","min-width":"250","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"create_time",label:"\u62A5\u544A\u65F6\u95F4",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(e._s(a.row.create_time?a.row.create_time.substring(0,10)+" "+a.row.create_time.substring(11,19):""))]}}])}),t("el-table-column",{attrs:{prop:"create_personname",label:"\u62A5\u544A\u4EBA",width:"120"}}),t("el-table-column",{attrs:{prop:"modify_time",label:"\u6700\u540E\u4FEE\u6539\u65F6\u95F4",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(e._s(a.row.modify_time?a.row.modify_time.substring(0,10)+" "+a.row.modify_time.substring(11,19):""))]}}])}),t("el-table-column",{attrs:{prop:"modify_personname",label:"\u6700\u540E\u4FEE\u6539\u4EBA",width:"120"}}),t("el-table-column",{attrs:{fixed:"right",label:"\u64CD\u4F5C",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return e.handleView(a.row)}}},[e._v("\u67E5\u770B")]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return e.handleEdit(a.row)}}},[e._v("\u7F16\u8F91")]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return e.handleDelete(a.row)}}},[t("span",{staticClass:"dangerText"},[e._v("\u5220\u9664")])])]}}])})],1),t("el-pagination",{staticStyle:{float:"right","padding-top":"16px"},attrs:{"current-page":e.page.pageNum,"page-sizes":[10,20,30,50,100],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},d=[],c=l(o,m,d,!1,null,"0b3d9630",null,null);const p=c.exports;export{p as default};
