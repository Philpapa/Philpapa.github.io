import{a4 as C,g as b,M as g,F as u,r as v,l as w,z as F}from"./index.0af4b258.js";import{c as h}from"./index.d15eee7b.js";function B(i){let e=C(i),t=C({data:{}});function a(s,r=e){if(!r||!s)return;let n;if(!r.isBasic&&r.id===s.id)return r;if(r.children&&r.children.length>0)for(let o in r.children)a(s,r.children[o])&&(typeof s=="object"&&(r.children[o]=s),n=r.children[o]);return n}function l(s){t.data=s.id===t.data.id?{}:s}return{data:e,currentComp:t,findCompInfoById:a,setCurrentComp:l}}const I=g({name:"constructorTree",setup(){return{}}});var A=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[e._v("2354235325")])},E=[],L=b(I,A,E,!1,null,"2c085400",null,null);const H=L.exports;function O(i){const{attrs:e,name:t,props:{dicOrigin:a,dic:l,opHeight:s,groupDisabled:r,dividerType:n,dividerHeight:o,dividerColor:c,chooseAlign:_,chooseRowNum:f,textFontSize:x,textColor:k,textLineHeight:T,textSpaceLetter:$,textAlign:S}}=i;let d={};return e.forEach(D=>{const{key:p,value:m,type:N}=D;if(!u.isEmpty(p)&&!u.isEmpty(m)&&(d[p]=m),N==="json"){if(!u.isEmpty(p)&&!u.isEmpty(m)){let y=null;try{y=JSON.parse(m),d[p]=y}catch(R){console.log(R)}}}else!u.isEmpty(p)&&!u.isEmpty(m)&&(d[p]=m)}),s&&(d.opHeight=s),r&&(d.disabled=!0),["dRadio","dCheckbox"].includes(t)&&(d.layout={chooseAlign:_||"many",chooseRowNum:u.isEmpty(f)?0:f}),t==="dDivider"&&(d.dividerStyle={type:n,height:o,color:c}),t==="dText"&&(d.textStyle={size:x,color:k,letterSpacing:$,lineHeight:T,textAlign:S}),d}const P=g({name:"cRecursive",props:{data:{type:Object},currentComp:{type:Object}},setup(){const i=v(["dPlaceholder","dDivider","dTitle","dText"]);function e(a){console.log(a,"e");const l=a.from._prevClass||"",s=a.to._prevClass||"";return l.includes("draggable-active-table")&&!s.includes("draggable-active-table")&&a.dragged._underlying_vm_.tag==="table"&&(delete a.dragged._underlying_vm_.tag,delete a.dragged._underlying_vm_.tableId),s.includes("draggable-active-table")&&(a.dragged._underlying_vm_.tag="table",a.dragged._underlying_vm_.tableId=a.to.__vue__.$attrs.compId),s.includes("draggable-compute-table")&&(a.dragged._underlying_vm_.tag="cTable"),s.includes("can")&&(a.dragged._underlying_vm_.props.groupDisabled=!!a.to.__vue__.$attrs.groupDisabled),s.includes("draggable-comp")?!1:!(!["dInput","dInputNumber","dTextarea","dTime","dRadio","dCheckbox","dSelect","dCascader"].includes(a.dragged._underlying_vm_.name)&&s.includes("draggable-active-table")||!["dRadio","dCheckbox"].includes(a.dragged._underlying_vm_.name)&&s.includes("draggable-compute-table"))}function t(a){if(!a)return{};const{props:{width:l,labelColAlign:s}}=a;return{width:`${l}%`,alignItems:`${s||"center"}`}}return{noLabel:i,useCompAttrs:O,onMove:e,compStyleHandler:t}}});var G=function(){var e=this,t=e._self._c;return e._self._setupProxy,e.data?t("draggable",e._b({staticClass:"c-recursive",attrs:{move:e.onMove,forceFallback:"true",ghostClass:"chosen"},model:{value:e.data.children,callback:function(a){e.$set(e.data,"children",a)},expression:"data.children"}},"draggable",{animation:150,group:{name:"name"},sort:!0},!1),[e._l(e.data.children,function(a){return[t("div",{key:a.id,staticClass:"comp",class:{isCurrent:a.id===e.currentComp.id,isGroup:a.children},style:e.compStyleHandler(a)},[a.props.isCollect?t("c-recursive",e._g({key:a.id,class:{isGroup:a.props.isCollect},staticStyle:{width:"100%"},attrs:{currentComp:e.currentComp,data:a}},e.$listeners)):[e.noLabel.includes(a.name)?e._e():t("span",{staticClass:"comp-label"},[e._v(e._s(a.label))]),t(a.name,e._b({key:a.id,tag:"component",staticClass:"comp-con",attrs:{dic:a.props.dic?a.props.dic:null},model:{value:a.defVal,callback:function(l){e.$set(a,"defVal",l)},expression:"comp.defVal"}},"component",e.useCompAttrs(a),!1))],t("div",{directives:[{name:"show",rawName:"v-show",value:a.id===e.currentComp.id,expression:"comp.id === currentComp.id"}],staticClass:"comp-type"},[e._v(e._s(a.type)+" ")]),t("div",{staticClass:"click-btn",on:{click:function(l){return l.stopPropagation(),e.$emit("setCurrentComp",a)}}})],2)]})],2):e._e()},J=[],j=b(P,G,J,!1,null,"2a8aa139",null,null);const M=j.exports;const z=g({name:"compGroup",props:{type:{type:Number}},setup(i){const e=v(i.type===1?h.basic:h.container),t=v([]),a=v(!1);function l(n){let o=JSON.parse(JSON.stringify(n));return o.id=u.nanoid(),o}function s(n){let o=document.querySelector(".chosen");console.dir(o),a.value=!0;const c=n.to._prevClass||"";return c.includes("draggable-active-table")&&(n.dragged._underlying_vm_.tag="table",n.dragged._underlying_vm_.tableId=n.to.__vue__.$attrs.compId),c.includes("draggable-compute-table")&&(n.dragged._underlying_vm_.tag="cTable"),c.includes("c-recursive")&&(n.dragged._underlying_vm_.props.groupDisabled=!!n.to.__vue__.$attrs.groupDisabled),c.includes("draggable-comp")?!1:!(!["dInput","dInputNumber","dTextarea","dTime","dRadio","dCheckbox","dSelect","dCascader"].includes(n.dragged._underlying_vm_.name)&&c.includes("draggable-active-table")||!["dRadio","dCheckbox"].includes(n.dragged._underlying_vm_.name)&&c.includes("draggable-compute-table"))}function r(n){a.value=!1,t.value=[]}return{compDic:e,delList:t,showDelBox:a,cloneDefaultField:l,onMove:s,onEnd:r}}});var V=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"comp-group"},[t("draggable",e._b({staticClass:"draggable-comp",attrs:{clone:e.cloneDefaultField,move:e.onMove,forceFallback:"true",chosenClass:"chosen"},on:{unchoose:e.onEnd},model:{value:e.compDic,callback:function(a){e.compDic=a},expression:"compDic"}},"draggable",{animation:150,group:{name:"name",pull:"clone"},sort:!0},!1),e._l(e.compDic,function(a,l){return t("div",{key:l,staticClass:"draggable-com-item"},[t("i",{class:`el-icon-my-${a.name}`}),t("span",[e._v(e._s(a.label))])])}),0),e.showDelBox?t("draggable",e._b({key:"del",staticClass:"del-draggable",attrs:{ghostClass:"trash"},model:{value:e.delList,callback:function(a){e.delList=a},expression:"delList"}},"draggable",{animation:150,group:{name:"name",pull:"clone"},sort:!0},!1)):e._e()],1)},q=[],K=b(z,V,q,!1,null,"c6d40f40",null,null);const U=K.exports;const Q={name:"compSet",props:{data:{type:Object}},setup(){return{}}};var W=function(){var e=this,t=e._self._c;return t("div",{staticClass:"comp-set",class:{isActive:e.data.id}},[e.data.id?[t("div",[t("span",[e._v("\u9ED8\u8BA4\u503C")]),e.data.props.dic?[t("el-select",{key:e.data.id,staticStyle:{width:"100%"},attrs:{placeholder:"\u8BF7\u9009\u62E9",multiple:Array.isArray(e.data.defVal)},model:{value:e.data.defVal,callback:function(a){e.$set(e.data,"defVal",a)},expression:"data.defVal"}},e._l(e.data.props.dic,function(a){return t("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})}),1)]:[t("el-input",{key:e.data.id,attrs:{placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9",type:"text"},model:{value:e.data.defVal,callback:function(a){e.$set(e.data,"defVal",typeof a=="string"?a.trim():a)},expression:"data.defVal"}})]],2)]:e._e()],2)},X=[],Y=b(Q,W,X,!1,null,"b7d58a34",null,null);const Z=Y.exports;const ee=g({components:{ConstructorTree:H,CRecursive:M,CompGroup:U,CompSet:Z},setup(i,e){function t(){let c=e.root.$router;w.exports.MessageBox.confirm("\u82E5\u5185\u5BB9\u672A\u4FDD\u5B58\u6570\u636E\u4F1A\u4E22\u5931\uFF0C\u662F\u5426\u9000\u51FA?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{c.push("/customFormList")}).catch(_=>{console.log(_)})}const a=v("comp"),l=v(!0);function s(c){l.value=!0;let _=document.querySelector(".el-tabs__active-bar");F(()=>{let f=document.querySelector(`#tab-${c.name}`);_.style.transform=`translate(0, ${f.offsetTop}px)`})}const{data:r,currentComp:n,setCurrentComp:o}=B({id:"basic",isBasic:!0,children:[],cbApi:"",configFields:[]});return{goBack:t,activeTabName:a,showTab:l,tabBarPositionHandler:s,data:r,currentComp:n,setCurrentComp:o}}});var te=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"comp-designer"},[t("div",{staticClass:"con-header"},[t("div",{staticClass:"con-bar-one"},[t("div",{staticClass:"goBack"},[t("i",{staticClass:"el-icon-my-leftarrow",on:{click:e.goBack}}),t("span",[e._v("\u8FD4\u56DE\u5217\u8868")])]),t("div",{staticClass:"form-name"}),t("div",{staticClass:"bar-fn"},[t("div",{staticClass:"bar-btn"},[t("dIcon",{attrs:{name:"preview"}}),t("span",[e._v("\u6253\u5370\u9884\u89C8")])],1),t("div",{staticClass:"bar-btn"},[t("dIcon",{attrs:{name:"preview"}}),t("span",[e._v("\u9884\u89C8")])],1),t("el-button",{attrs:{type:"primary"}},[e._v("\u4FDD\u5B58")])],1)]),t("div",{staticClass:"con-bar-two"},[t("div",{staticClass:"bar-btn"},[t("d-icon",{attrs:{name:"createJson"}}),t("span",[e._v("\u751F\u6210JSON")])],1),t("div",{staticClass:"bar-btn"},[t("d-icon",{attrs:{name:"importJson"}}),t("span",[e._v("\u5BFC\u5165JSON")])],1),t("div",{staticClass:"bar-btn"},[t("d-icon",{attrs:{name:"dataset"}}),t("span",[e._v("\u6570\u636E\u96C6")])],1),t("div",{staticClass:"bar-btn"},[t("d-icon",{attrs:{name:"delete"}}),t("span",[e._v("\u6E05\u7A7A")])],1),t("div",{staticClass:"bar-btn"},[t("d-icon",{attrs:{name:"gjConfig"}}),t("span",[e._v("\u9AD8\u7EA7\u914D\u7F6E")])],1),t("div",{staticClass:"bar-btn"},[t("d-icon",{attrs:{name:"back"}}),t("span",[e._v("\u9000\u51FA")])],1)])]),t("div",{staticClass:"con-body"},[t("el-tabs",{class:{tabs__hidden:!e.showTab},attrs:{"tab-position":"left"},on:{"tab-click":e.tabBarPositionHandler},model:{value:e.activeTabName,callback:function(a){e.activeTabName=a},expression:"activeTabName"}},[t("el-tab-pane",{attrs:{name:"comp"}},[t("span",{staticClass:"tab-item tab-item-comp",attrs:{slot:"label"},slot:"label"},[t("i",{class:e.activeTabName==="comp"?"el-icon-my-activeComp":"el-icon-my-comp"}),t("span",[e._v("\u7EC4\u4EF6")])]),t("div",{staticClass:"tab-tree-title"},[t("span",[e._v("\u57FA\u7840\u63A7\u4EF6")]),t("i",{staticClass:"el-icon-close",on:{click:function(a){e.showTab=!1}}})]),t("Comp-Group",{attrs:{type:1}})],1),t("el-tab-pane",{attrs:{name:"layout"}},[t("span",{staticClass:"tab-item tab-item-layout",attrs:{slot:"label"},slot:"label"},[t("i",{class:e.activeTabName==="layout"?"el-icon-my-activeLayout":"el-icon-my-layout"}),t("span",[e._v("\u5E03\u5C40")])]),t("div",{staticClass:"tab-tree-title"},[t("span",[e._v("\u5E03\u5C40\u63A7\u4EF6")]),t("i",{staticClass:"el-icon-close",on:{click:function(a){e.showTab=!1}}})]),t("Comp-Group",{attrs:{type:2}})],1),t("el-tab-pane",{attrs:{name:"tree"}},[t("span",{staticClass:"tab-item tab-item-tree",attrs:{slot:"label"},slot:"label"},[t("i",{class:e.activeTabName==="tree"?"el-icon-my-activeTree":"el-icon-my-bTree",staticStyle:{"background-size":"90% auto"}}),t("span",[e._v("\u6811\u5F62")])]),t("div",{staticClass:"tab-tree-title"},[t("span",[e._v("\u6570\u636E\u7ED3\u6784\u6811")]),t("i",{staticClass:"el-icon-close",on:{click:function(a){e.showTab=!1}}})]),t("Constructor-Tree")],1)],1),t("C-Recursive",{attrs:{data:e.data,currentComp:e.currentComp.data},on:{setCurrentComp:e.setCurrentComp}}),t("Comp-Set",{attrs:{data:e.currentComp.data}})],1)])},ae=[],se=b(ee,te,ae,!1,null,"b4b5b76e",null,null);const re=se.exports;export{re as default};
